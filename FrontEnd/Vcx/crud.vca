SCCTEXT Version 4.0.0.2
PLATFORM C(8,0),UNIQUEID C(10,0),TIMESTAMP N(10,0),CLASS M(4,0),CLASSLOC M(4,0),BASECLASS M(4,0),OBJNAME M(4,0),PARENT M(4,0),PROPERTIES M(4,0),PROTECTED M(4,0),METHODS M(4,0),OBJCODE M(4,0),OLE M(4,0),OLE2 M(4,0),RESERVED1 M(4,0),RESERVED2 M(4,0),RESERVED3 M(4,0),RESERVED4 M(4,0),RESERVED5 M(4,0),RESERVED6 M(4,0),RESERVED7 M(4,0),RESERVED8 M(4,0),USER M(4,0)
1252

[ RECORD]
[PLATFORM] COMMENT 
[UNIQUEID] Class     
[START RESERVED1]
VERSION =   3.00[END RESERVED1]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0MK9CG
[CLASS] _form
[CLASSLOC] ..\..\fw\comunes\vcx\_controles_base.vcx
[BASECLASS] form
[OBJNAME] crud_form
[START PROPERTIES]
BorderStyle = 3
Height = 360
Width = 720
DoCreate = .T.
Caption = ""
ControlBox = .F.
Closable = .F.
MaxButton = .F.
MinButton = .F.
Visible = .T.
Enabled = .T.
WindowType = 1
ctitulodelprograma = Título del Programa
ostatus = .NULL.
clave = 0
oparametros = .NULL.
ngap = 12
lingtip = .F.
lingtipactivo = .F.
ledit = .F.
ncalculatedheight = 0
lautomaticdisplay = .T.
lautosize = .T.
_memberdata =     1519<VFPData><memberdata name="grabar" display="Grabar"/><memberdata name="eliminar" display="Eliminar"/><memberdata name="ctitulodelprograma" display="cTituloDelPrograma" favorites="True"/><memberdata name="cmodelo" display="cModelo" favorites="True"/><memberdata name="ostatus" display="oStatus"/><memberdata name="validardatos" display="ValidarDatos"/><memberdata name="sincronizarcontroles" display="SincronizarControles"/><memberdata name="autosize" display="Autosize"/><memberdata name="clave" display="CLAVE"/><memberdata name="oparametros" display="oParametros"/><memberdata name="ngap" display="nGap"/><memberdata name="lingtip" display="lIngTip"/><memberdata name="lingtipactivo" display="lIngTipActivo"/><memberdata name="lingtipactivo_assign" display="lIngTipActivo_Assign"/><memberdata name="ledit" display="lEdit"/><memberdata name="ledit_assign" display="lEdit_Assign"/><memberdata name="enabled" display="Enabled"/><memberdata name="enabled_assign" display="Enabled_Assign"/><memberdata name="initializerows" display="InitializeRows"/><memberdata name="ncalculatedheight" display="nCalculatedHeight"/><memberdata name="settabindex" display="SetTabIndex"/><memberdata name="hookafterinit" display="HookAfterInit"/><memberdata name="visible" display="Visible"/><memberdata name="visible_assign" display="Visible_Assign"/><memberdata name="lautomaticdisplay" display="lAutomaticDisplay"/><memberdata name="lautosize" display="lAutoSize"/><memberdata name="ctable" type="Property" favorites="True"/></VFPData>

cmodelo = 
Name = "crud_form"
[END PROPERTIES]
[START METHODS]
PROCEDURE Destroy
Local loBiz As oModelo Of "FrontEnd\Prg\Modelo.prg"
Local lcCursor As String

Try

	loBiz = This.oBiz
	For Each lcCursor In loBiz.oCursores
		Use In Select( lcCursor )
	Endfor

Catch To oErr

Finally
	This.oBiz = Null
	This.oColTables = Null
	This.oControles.Remove(-1)
	This.oControles = Null
	This.oRegistro = Null

Endtry

ENDPROC
PROCEDURE Init
#INCLUDE "FW\Comunes\Include\Praxis.h"

Lparameters oParam As Object

Local lcCommand As String
Local loStatus As Object,;
    loBiz As oModelo Of "FrontEnd\Prg\Modelo.prg",;
    loReturn As Object

Local lnABM As Integer
Local llOk As Boolean

Try

    lcCommand = ""
    llOk = .F.

    Thisform.cModelo 	= oParam.cModelo
    Thisform.oBiz 		= oParam.oBiz
    lnABM 				= oParam.oRegistro.ABM
    This.oParametros 	= oParam

    loStatus = Createobject( "Empty" )
    AddProperty( loStatus, "lCancelar", .T. )
    Thisform.oStatus = loStatus


    loBiz 		= Thisform.oBiz
    loReturn 	= loBiz.GetByPK( oParam.uPK )

    If !Isnull( loReturn.oRegistro )
        llOk = .T.

        Thisform.oRegistro = loReturn.oRegistro

        Thisform.oRegistro.ABM 	= lnABM
        loBiz.oRegistro 		= Thisform.oRegistro
        loBiz.nId 				= loBiz.oRegistro.Id

        Thisform.InitializeControls()
        Thisform.InitializeRows()
        Thisform.SincronizarControles()

        If Thisform.lAutoSize
            Thisform.AutoSize()
        Endif

        Thisform.lBindControls 	= .T.	&& Habilita que se modifique Thisform.BindControls
        Thisform.BindControls 	= .T.
        Thisform.Crud_Ajustes.ZOrder( 0 )
        Thisform.HookAfterInit()

        Thisform.Visible 	= .T.
        Thisform.LockScreen = .F.

    Endif

Catch To oErr
    Local loError As ErrorHandler Of "Tools\ErrorHandler\Prg\ErrorHandler.prg"
    loError = Newobject( "ErrorHandler", "ErrorhandlerPrg\ErrorHandler.prg" )
    loError.Cremark = lcCommand
    loError.Process( oErr )
    Throw loError

Finally
    loBiz = Null
    loStatus 	= Null
    oParam 		= Null

    Use In Select( "cRows_" + Thisform.Name )

Endtry

Return llOk

ENDPROC
PROCEDURE KeyPress
#INCLUDE "FW\Comunes\Include\Praxis.h"

Lparameters nKeyCode, nShiftAltCtrl
Local lcCommand As String

Try

	lcCommand = ""

	If nShiftAltCtrl = KEY_CTRL_DOWN And nKeyCode = KEY_CTRL_F10
		Thisform.On_Ctrl_F10()

	Else
		If Thisform.lIngTipActivo
			If Inlist( nKeyCode, Thisform.nIngTip1, Thisform.nIngTip2 )


				*Wait WINDOW noclear nowait "Se apreto " + Transform( nKeyCode )
				Do Case
					Case Thisform.nIngTipStatus = 0	&& h00
						* Es la primer Tecla presionada
						If nKeyCode = Thisform.nIngTip1
							Thisform.nIngTipStatus = 2	&&	h10

						Else
							Thisform.nIngTipStatus = 1	&&	h01

							If Thisform.nIngTipAction = 1
								* Solo vale la primer tecla presionada primero
								* Limpiar buffer de IngTip
								Thisform.nIngTipStatus = 0

							Endif

						Endif

					Case Thisform.nIngTipStatus = 1	&& h01

						If nKeyCode = Thisform.nIngTip1
							* Se completo el orden Segunda + Primera

							Thisform.WCLAV = "M"
							Thisform.lIngTipActivo = .F.

						Else
							* Se presiono 2 veces la Segunda
							* Limpiar buffer de IngTip
							Thisform.nIngTipStatus = 0

						Endif

					Case Thisform.nIngTipStatus = 2	&& h10
						If nKeyCode = Thisform.nIngTip2
							* Se completo el orden Primera + Segunda

							Thisform.WCLAV = "B"
							Thisform.lIngTipActivo = .F.

						Else
							* Se presiono 2 veces la Primera
							* Limpiar buffer de IngTip
							Thisform.nIngTipStatus = 0

						Endif

				Endcase

			Else
				* Limpiar buffer de IngTip
				Thisform.nIngTipStatus = 0	&& h00
				*Wait WINDOW noclear nowait "Se apreto " + Transform( nKeyCode )

			Endif

		Else
			Do Case
			Case Thisform.lEdit = .F.
				Do Case
				Case nKeyCode = KEY_ESCAPE
					Thisform.Cancelar()
					
				Otherwise

				EndCase

			Otherwise

			EndCase
		Endif
	Endif

Catch To oErr
	Local loError As ErrorHandler Of "Tools\ErrorHandler\Prg\ErrorHandler.prg"
	loError = Newobject( "ErrorHandler", "ErrorhandlerPrg\ErrorHandler.prg" )
	loError.Cremark = lcCommand
	loError.Process( oErr )
	Throw loError

Finally


Endtry

ENDPROC
PROCEDURE Load
#INCLUDE "FW\Comunes\Include\Praxis.h"

If !IsRuntime()
	Set Datasession To
EndIf

Thisform.lBindControls = .T.
Thisform.BindControls = .F.
Thisform.lBindControls = .F.  && Deshabilita que se modifique Thisform.BindControls
Thisform.Visible = .F.
Thisform.LockScreen = .T.
Thisform.MaxWidth = Sysmetric( SYSMETRIC_SCREENWIDTH ) - ( 2 * Sysmetric( SYSMETRIC_VSCROLLBARWIDTH ) )
Thisform.BorderStyle = 2

If Vartype( CLAVE ) # "N"
	CLAVE = 5
Endif

This.CLAVE = CLAVE


ENDPROC
PROCEDURE MouseDown
Lparameters nButton, nShift, nXCoord, nYCoord

Do Case
	Case nButton = 2 And nShift = 0 && Right Click
		Text To lcMsg NoShow TextMerge Pretext 03
		[Ctrl][O]: Abrir / Editar
		[Ctrl][A]: Abrir / Editar
		[Ctrl][N]: Nuevo / Agregar
		[Ctrl][S]: Guardar
		EndText


		Inform( lcMsg, "Atajos", -1 )

Endcase

ENDPROC
PROCEDURE Unload
Return Thisform.oStatus
ENDPROC
PROCEDURE autosize
Local lcCommand As String
Local lnFormHeight As Integer
Local llAutocenter As Boolean
Local loBiz As oModelo Of "FrontEnd\Prg\Modelo.prg"

Try

    lcCommand = ""
    llAutocenter = .F.

    loBiz = Thisform.oBiz

    Thisform.Crud_Titulo.Anchor 	= 0
    Thisform.Crud_Shape.Anchor 		= 0
    Thisform.Crud_Buttons.Anchor 	= 0
    Thisform.Crud_Ajustes.Anchor 	= 0

    lnFormHeight = ( Thisform.nCalculatedHeight + Thisform.Crud_Buttons.Height )
    lnFormHeight = lnFormHeight + ( Thisform.nGap * 3 )

    If lnFormHeight > Thisform.Height
        Thisform.Height = lnFormHeight
    Endif

    If Thisform.Height > _Screen.Height - ( Thisform.nGap * 4 )
        _Screen.Height = Thisform.Height + ( Thisform.nGap * 4 )
        llAutocenter = .T.
    Endif

    If Thisform.Width > _Screen.Width - ( Thisform.nGap * 4 )
        _Screen.Width = Thisform.Width + ( Thisform.nGap * 4 )
        llAutocenter = .T.
    Endif

    If llAutocenter
        _Screen.AutoCenter = .T.
    Endif

    Thisform.AutoCenter = .T.

    If Mod( Thisform.Width, Thisform.nGap ) > 0
        Thisform.Width = Round( Thisform.Width / Thisform.nGap, 0 ) * Thisform.nGap
    Endif

    If Mod( Thisform.Height, Thisform.nGap ) > 0
        Thisform.Height = Round( Thisform.Height / Thisform.nGap, 0 ) * Thisform.nGap
    Endif

    Thisform.Crud_Titulo.Top 	= 0
    Thisform.Crud_Titulo.Left 	= 0
    Thisform.Crud_Titulo.AutoSize()

    If Thisform.Crud_Titulo.Width > Thisform.Width
        Thisform.Width = Thisform.Crud_Titulo.Width

    Else
        Thisform.Crud_Titulo.Width 	= Thisform.Width

    Endif

    Thisform.Crud_Buttons.Top 	= Thisform.Height - Thisform.Crud_Buttons.Height - Thisform.nGap
    Thisform.Crud_Buttons.Left 	= 0
    Thisform.Crud_Buttons.Width = Thisform.Width
    Thisform.Crud_Buttons.AutoSize()

    Thisform.Crud_Shape.Top 	= Thisform.Crud_Titulo.Top + Thisform.Crud_Titulo.Height + Thisform.nGap
    Thisform.Crud_Shape.Left 	= Thisform.nGap
    Thisform.Crud_Shape.Width 	= Thisform.Width - ( Thisform.nGap * 2 )
    Thisform.Crud_Shape.Height 	= Thisform.Height - Thisform.Crud_Titulo.Height - Thisform.Crud_Buttons.Height - 30


    If loBiz.lShowCamposEspeciales
        Thisform.Crud_Ajustes.Top	= Thisform.Height - Thisform.Crud_Ajustes.Height - ( Thisform.nGap * 1 )
        Thisform.Crud_Ajustes.Left 	= Thisform.Width - Thisform.Crud_Ajustes.Width - ( Thisform.nGap * 2 ) - Thisform.Crud_buttons.cmdGrabar.Width

        Thisform.Crud_Ajustes.Crud_Shape.BackStyle = 1
        Thisform.Crud_Ajustes.Mostrar()
    Endif


Catch To loErr
    Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
    loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
    loError.cRemark = lcCommand
    loError.Process ( m.loErr )
    Throw loError

Finally
    Thisform.Crud_Titulo.Anchor 	= 11
    Thisform.Crud_Shape.Anchor 		= 15
    Thisform.Crud_Buttons.Anchor 	= 14
    Thisform.Crud_Ajustes.Anchor 	= 12

    loBiz = Null


Endtry

ENDPROC
PROCEDURE eliminar
#INCLUDE "FW\Comunes\Include\Praxis.h"

Local lcCommand As String
Local lcTextoDeAlerta As String,;
    lcMensajeAclaratorio As String,;
    lcPicture As String,;
    lcKeyPressList As String,;
    lcFuncionDeUsuario As String

Local loProperties As Object

Local lnKey As Integer

Try

    lcCommand = ""
    lcFuncionDeUsuario = ""
    loProperties = CreateObject( "Empty" )
    AddProperty( loProperties, "nAlertColor", RGB(255,0,0) )

    TEXT To lcTextoDeAlerta NoShow TextMerge Pretext 03
	<<Thisform.cTituloDelPrograma>>

	Confirme Eliminación
    ENDTEXT

    TEXT To lcMensajeAclaratorio NoShow TextMerge Pretext 03
	[F8]: CONFIRMA          [ESC]: CANCELA
    ENDTEXT

    lcKeyPressList 			= ""
    TEXT To lcKeyPressList NoShow TextMerge Pretext 15
	<<KEY_F8>>
    ENDTEXT

    *lcPicture = "v:\CloudFox\FW\Comunes\image\jpg\atencion.jpg"
    lcPicture = "v:\CloudFox\FW\Comunes\image\jpg\Atencion.png"


    lnKey = UserKeyPress( lcTextoDeAlerta,;
        lcMensajeAclaratorio,;
        lcKeyPressList,;
        lcPicture,;
        lcFuncionDeUsuario,;
        loProperties  )

    If lnKey = KEY_F8
        Thisform.ValidarDatos()
        loReg = CloneObject( Thisform.oRegistro )

        If Thisform.oBiz.Grabar( loReg )
            Thisform.oStatus.lCancelar = .F.
            Thisform.Cerrar()

        Else
            Thisform.ValidarDatos( .T. )

        Endif
    Endif

Catch To loErr
    Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
    loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
    loError.cRemark = lcCommand
    loError.Process ( m.loErr )
    Throw loError

Finally


Endtry

ENDPROC
PROCEDURE enabled_assign
lparameters tEnabled
This.Enabled = tEnabled
ThisForm.Crud_buttons.Enabled = tEnabled
ThisForm.Crud_titulo.Enabled = tEnabled

ENDPROC
PROCEDURE grabar
Local lcCommand as String
Local loReg as Object

Try

	lcCommand = ""
	
	Thisform.ValidarDatos()
	loReg = CloneObject( Thisform.oRegistro )
	If Thisform.oBiz.Grabar( loReg )
		Thisform.oStatus.lCancelar = .F.
		Thisform.Cerrar()
		
	Else
		Thisform.ValidarDatos( .T. )
			
	EndIf

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = NewObject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally
	loReg = Null


EndTry

ENDPROC
PROCEDURE hookafterinit
Local lcCommand as String

Try

	lcCommand = ""

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = NewObject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


EndTry

ENDPROC
PROCEDURE initializecontrols
* RA 23/09/2021(09:37:53)
* No es necesario poner código en este metodo.
* Todos los controles de la las _Controles_Base se bindean a
* éste metodo para inicializarse.

* Si se pone código, tener en cuenta que los controles se inicializan
* despues de ejecutarse el código de éste metodo.
ENDPROC
PROCEDURE initializerows
* RA 23/10/2021(10:15:28)
* No es necesario poner código en este metodo.
* Todos los controles de la clase _Controles_Base se bindean a
* éste metodo para inicializarse.

* Si se pone código, tener en cuenta que los controles se inicializan
* despues de ejecutarse el código de éste metodo.
ENDPROC
PROCEDURE ledit_assign
Lparameters tlEdit
Local lcCommand As String

Try

	lcCommand = ""
	Thisform.Crud_buttons.Enabled = !tlEdit

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


Endtry

This.Ledit = tlEdit

ENDPROC
PROCEDURE lingtipactivo_assign
lparameters tlIngTipActivo
This.lIngTipActivo = tlIngTipActivo

ENDPROC
PROCEDURE settabindex
Local lcCommand As String,;
	lcCursorName As String,;
	lcControlName as String
Local loCtrl As _textbox Of "fw\comunes\vcx\_controles_base.vcx"

Try

	lcCommand = ""

	lcCursorName = "cControles_" + This.Name + Sys(2015)

	TEXT To lcCommand NoShow TextMerge Pretext 15
	Create Cursor <<lcCursorName>> (
		Row I,
		Column I,
		Name C(100) )
	ENDTEXT

	&lcCommand
	lcCommand = ""

	For Each loCtrl In This.Controls
		If Pemstatus( loCtrl, "nTopRow", 5 ) And Pemstatus( loCtrl, "nLeftColumn", 5 )
			TEXT To lcCommand NoShow TextMerge Pretext 15
			Insert Into <<lcCursorName>>
				( Row,Column,Name )
				Values
				( loCtrl.nTopRow, loCtrl.nLeftColumn, Alltrim( loCtrl.Name ))
			ENDTEXT

			&lcCommand
			lcCommand = ""

		Endif
	Endfor

	TEXT To lcCommand NoShow TextMerge Pretext 15
		Select 	*
			From <<lcCursorName>>
			Order By Row, Column
			Into Cursor <<lcCursorName>> ReadWrite
	ENDTEXT

	&lcCommand
	lcCommand = ""


	Select Alias( lcCursorName )
	Locate
	Scan

		lcControlName = Alltrim( Evaluate( lcCursorName + ".Name" ))
		loCtrl = Evaluate( "This." + lcControlName )
		
		loCtrl.TabIndex = Recno()

	Endscan

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally
	loCtrl = Null
	Use in Select( lcCursorName )


Endtry

ENDPROC
PROCEDURE sincronizarcontroles
#INCLUDE "FW\Comunes\Include\Praxis.h"

Local lcCommand As String,;
lcTitulo as String
Local loBiz As oModelo Of "FrontEnd\Prg\Modelo.prg",;
	loCtrl As TextBox
Local i As Integer

Try

	lcCommand = ""
	loBiz = Thisform.oBiz
	
	If PemStatus( Thisform.oRegistro, "Nombre", 5 )
		lcTitulo = loBiz.cTituloEnForm + " - " + Alltrim( Thisform.oRegistro.Nombre )
		
	Else
		lcTitulo = loBiz.cTituloEnForm
	
	EndIf
	
	Thisform.cTituloDelPrograma = lcTitulo

	Thisform.Crud_Buttons.SincronizarBotones()

	Do Case
	Case Thisform.oRegistro.ABM = ABM_ALTA
		Thisform.cTituloDelPrograma = "Alta de " + loBiz.cTituloEnForm

	Case Thisform.oRegistro.ABM = ABM_BAJA
		Thisform.cTituloDelPrograma = "Eliminación de " + lcTitulo
		
		For Each loCtrl In Thisform.oControles
			Try

				loCtrl.Enabled = .F.

			Catch To oErr

			Finally

			Endtry

		Endfor

	Otherwise

	EndCase

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally
	loBiz = Null
	loCtrl = Null


Endtry

ENDPROC
PROCEDURE validardatos
Lparameters lRestore As Boolean

Local lcCommand As String
Local loControles As Collection,;
	loControl As _textbox Of v:\cloudfox\fw\comunes\vcx\_controles_base.vcx,;
	loBiz As oModelo Of "FrontEnd\Prg\Modelo.prg"

Local i As Integer


Try

	lcCommand 	= ""
	loBiz 		= Thisform.oBiz
	loControles = Thisform.oControles
	
	For Each loControl In loControles

		loControl.lValid = .T.	

		If Pemstatus( loControl, "cCueText", 5 )
			If Inlist( Lower(loControl.BaseClass), "textbox", "editbox" )
				If lRestore
					If Alltrim( Transform( loControl.Value ) ) == Alltrim( Transform( loControl.uOriginalValue ))
						If Empty(Alltrim( Transform( loControl.Value ) ) )
							loControl.Value = loControl.cCueText
						Endif
					Endif

				Else
					If Alltrim( Transform( loControl.Value ) ) == Alltrim( Transform( loControl.cCueText ))
						loControl.Value = loControl.uOriginalValue
					Endif

				Endif
			Endif

		EndIf
		
		If lRestore
			i = loBiz.oColErrors.GetKey( Lower( loControl.cFieldName ))
			If !Empty( i )
				loControl.lValid = .F.
				loControl.LostFocus()
			Endif
		Endif

	Endfor

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally
	loControl = Null
	loControles = Null


Endtry

ENDPROC
PROCEDURE visible_assign
lparameters tVisible
This.Visible = tVisible

ENDPROC
[END METHODS]
[START RESERVED1]
Class[END RESERVED1]
[START RESERVED2]
5[END RESERVED2]
[START RESERVED3]
ctitulodelprograma
ostatus
clave
oparametros
ngap
lingtip
lingtipactivo
ledit
ncalculatedheight Altura del Form calculada en función de los controles contenidos
lautomaticdisplay Si es .T., cada control define. Si es .F., predomina sobre la opcion del copntrol
lautosize
*grabar 
*eliminar 
*validardatos 
*sincronizarcontroles 
*autosize Specifies if a control is automatically resized to fit its contents.
*lingtipactivo_assign 
*ledit_assign 
*enabled_assign 
*initializerows Inicializa las filas virtuales donde se ubican los controles
*settabindex Setea la propiedad TabIndex en función de la fila (arriba a abajo) y la columna (izquierda a derecha)
*hookafterinit 
*visible_assign 
[END RESERVED3]
[START RESERVED6]
Pixels[END RESERVED6]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65I0MK07U
[CLASS] shape
[BASECLASS] shape
[OBJNAME] Crud_Shape
[PARENT] crud_form
[START PROPERTIES]
Top = 48
Left = 12
Height = 252
Width = 696
Anchor = 15
BackStyle = 0
Curvature = 12
BorderColor = 0,128,255
ZOrderSet = 0
Name = "Crud_Shape"
[END PROPERTIES]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0PJNZW
[CLASS] crud_buttons
[CLASSLOC] crud.vcx
[BASECLASS] container
[OBJNAME] Crud_buttons
[PARENT] crud_form
[START PROPERTIES]
Anchor = 14
Top = 312
Left = 0
ZOrderSet = 1
Name = "Crud_buttons"
cmdGrabar.Name = "cmdGrabar"
cmdEliminar.Visible = .F.
cmdEliminar.Name = "cmdEliminar"
cmdCancelar.Name = "cmdCancelar"
[END PROPERTIES]
[START METHODS]
PROCEDURE sincronizarbotones
#INCLUDE "FW\Comunes\Include\Praxis.h"

Local lcCommand As String

Try

	lcCommand = ""
	This.Autosize()
	If Thisform.oRegistro.ABM = ABM_BAJA
		This.cmdEliminar.Visible 	= .T.
		This.CmdCancelar.Visible 	= .T.
		This.CmdCancelar.Left 		= This.Width - ( This.CmdCancelar.Width + ( Thisform.nGap * 2 ) )
		This.cmdGrabar.Visible 		= .F.
		
		Thisform.Caption = "Eliminar Registro"

	Else
		This.cmdEliminar.Visible 	= .F.
		This.CmdCancelar.Visible 	= .T.
		This.CmdCancelar.Left 		= ( Thisform.nGap * 2 )
		This.cmdGrabar.Visible 		= .T.
		
		If Thisform.oRegistro.ABM = ABM_ALTA
			Thisform.Caption = "Agregar Registro"
			
		Else
			Thisform.Caption = "Modificar Registro"
			
		EndIf

	Endif



Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


Endtry

ENDPROC
[END METHODS]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0ST3WM
[CLASS] crud_titulo
[CLASSLOC] crud.vcx
[BASECLASS] container
[OBJNAME] Crud_titulo
[PARENT] crud_form
[START PROPERTIES]
Anchor = 11
ZOrderSet = 2
Name = "Crud_titulo"
lblFecha.Name = "lblFecha"
lblTitulo.Name = "lblTitulo"
lblObservaciones.Name = "lblObservaciones"
lblAsteriscos.Name = "lblAsteriscos"
[END PROPERTIES]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _66C0NZGU0
[CLASS] crud_ajustes
[CLASSLOC] crud.vcx
[BASECLASS] container
[OBJNAME] Crud_Ajustes
[PARENT] crud_form
[START PROPERTIES]
Anchor = 12
Top = -150
Left = 552
Visible = .F.
ZOrderSet = 3
Name = "Crud_Ajustes"
Crud_Shape.Name = "Crud_Shape"
spnOrden.Name = "spnOrden"
chkActivo.Alignment = 0
chkActivo.Name = "chkActivo"
chkEs_Sistema.Alignment = 0
chkEs_Sistema.Name = "chkEs_Sistema"
lblMostrar.Name = "lblMostrar"
lblOrden.Name = "lblOrden"
[END PROPERTIES]

[ RECORD]
[PLATFORM] COMMENT 
[UNIQUEID] RESERVED  
[OBJNAME] crud_form
[START PROPERTIES]
Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 12, 8, 20, 15, 42, 4, 1
[END PROPERTIES]
[START RESERVED1]
 ! ..\..\fw\comunes\include\praxis.hlnfdV! ..\..\fw\comunes\include\foxpro.hmÊrûF" ..\..\fw\comunes\include\strings.h¦nZOJ' ..\..\tools\namespaces\include\system.h®o±ÙF[END RESERVED1]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0O74DQ
[CLASS] container
[BASECLASS] container
[OBJNAME] crud_buttons
[START PROPERTIES]
Width = 720
Height = 35
BackStyle = 0
BorderWidth = 0
Enabled = .T.
_memberdata = <VFPData><memberdata name="sincronizarbotones" display="SincronizarBotones"/><memberdata name="autosize" display="Autosize"/><memberdata name="enabled" display="Enabled"/><memberdata name="enabled_assign" display="Enabled_Assign"/></VFPData>
Name = "crud_buttons"
[END PROPERTIES]
[START METHODS]
PROCEDURE autosize
Local lcCommand as String

Try

	lcCommand = ""

	This.CmdGrabar.Anchor = 0
	This.CmdGrabar.Top 		= 0
	This.CmdGrabar.Left 	= This.Width - This.CmdGrabar.Width - Thisform.nGap
	This.CmdGrabar.Anchor = 12
	
	This.cmdCancelar.Anchor = 0
	This.cmdCancelar.Top 	= 0
	This.CmdCancelar.Left 	= Thisform.nGap
	This.cmdCancelar.Anchor = 6

	This.cmdEliminar.Anchor = 0
	This.cmdEliminar.Top 	= 0
	This.cmdeliminar.Left 	= This.CmdGrabar.Left
	This.cmdEliminar.Anchor = 6
	

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = NewObject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


EndTry

ENDPROC
PROCEDURE enabled_assign
lparameters tEnabled
This.Enabled = tEnabled

This.SetAll( "Enabled", tEnabled )

ENDPROC
PROCEDURE sincronizarbotones
Local lcCommand as String

Try

	lcCommand = ""

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = NewObject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


EndTry

ENDPROC
[END METHODS]
[START RESERVED1]
Class[END RESERVED1]
[START RESERVED2]
4[END RESERVED2]
[START RESERVED3]
_memberdata XML Metadata for customizable properties
*sincronizarbotones 
*autosize Specifies if a control is automatically resized to fit its contents.
*enabled_assign 
[END RESERVED3]
[START RESERVED6]
Pixels[END RESERVED6]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0MK9CG
[CLASS] commandbutton
[BASECLASS] commandbutton
[OBJNAME] cmdGrabar
[PARENT] crud_buttons
[START PROPERTIES]
Left = 600
Height = 36
Width = 120
FontBold = .T.
FontSize = 12
Anchor = 12
Picture = ..\..\fw\comunes\image\bmp\ok.bmp
Caption = "Grabar"
MousePointer = 15
TabIndex = 1
ToolTipText = "Grabar el Registro"
SpecialEffect = 2
PicturePosition = 1
ForeColor = 0,128,64
Name = "cmdGrabar"
[END PROPERTIES]
[START METHODS]
PROCEDURE Click
Thisform.Grabar()
ENDPROC
[END METHODS]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0PG8SG
[CLASS] commandbutton
[BASECLASS] commandbutton
[OBJNAME] cmdEliminar
[PARENT] crud_buttons
[START PROPERTIES]
Left = 24
Height = 36
Width = 120
FontBold = .T.
FontSize = 12
Anchor = 6
Picture = ..\..\fw\comunes\image\bmp\delete.bmp
Caption = "Eliminar"
MousePointer = 15
TabIndex = 3
ToolTipText = "Eliminar el Registro"
SpecialEffect = 2
PicturePosition = 1
ForeColor = 255,0,0
Name = "cmdEliminar"
[END PROPERTIES]
[START METHODS]
PROCEDURE Click
Thisform.Eliminar()
ENDPROC
[END METHODS]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0PQ5J7
[CLASS] commandbutton
[BASECLASS] commandbutton
[OBJNAME] cmdCancelar
[PARENT] crud_buttons
[START PROPERTIES]
Left = 396
Height = 36
Width = 120
FontBold = .T.
FontSize = 12
Anchor = 6
Picture = ..\..\fw\comunes\image\bmp\close.bmp
Caption = "Cancelar"
MousePointer = 15
TabIndex = 2
SpecialEffect = 2
PicturePosition = 1
ForeColor = 0,64,128
Name = "cmdCancelar"
[END PROPERTIES]
[START METHODS]
PROCEDURE Click
Thisform.Cancelar()
ENDPROC
[END METHODS]

[ RECORD]
[PLATFORM] COMMENT 
[UNIQUEID] RESERVED  
[OBJNAME] crud_buttons
[START PROPERTIES]
Arial, 1, 12, 8, 20, 15, 42, 4, 1
[END PROPERTIES]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0SFJ1A
[CLASS] container
[BASECLASS] container
[OBJNAME] crud_titulo
[START PROPERTIES]
Width = 720
Height = 36
BorderWidth = 3
SpecialEffect = 0
Enabled = .T.
_memberdata = <VFPData><memberdata name="sincronizarcontroles" display="SincronizarControles"/><memberdata name="autosize" display="Autosize"/><memberdata name="enabled" display="Enabled"/><memberdata name="enabled_assign" display="Enabled_Assign"/></VFPData>
Name = "crud_titulo"
[END PROPERTIES]
[START METHODS]
PROCEDURE autosize
#INCLUDE "FW\Comunes\Include\Praxis.h"

Local lcCommand As String
Local loControl As ControlNameSpace Of 'Tools\Namespaces\Prg\ControlNameSpace.prg'

Try

	lcCommand = ""
	
	This.SetAll( "Anchor", 0 )
	
	This.SincronizarControles()
		
	loControl = NewObject( "ControlNameSpace", 'Tools\Namespaces\Prg\ControlNameSpace.prg' )
	loControl.TextProperties( This.LblAsteriscos )
	loControl.TextProperties( This.LblTitulo )
	loControl.TextProperties( This.LblObservaciones )
	loControl.TextProperties( This.LblFecha )
	
	This.lblAsteriscos.Left 	= 0
	This.lblTitulo.Left 		= This.lblAsteriscos.Width
	This.lblObservaciones.Left 	= This.lblTitulo.Left + This.lblTitulo.Width + 10
	
	This.Width = This.lblObservaciones.Left + This.lblObservaciones.Width + 10 + This.lblFecha.Width + 05
	
	
	Text To lcMsg NoShow TextMerge Pretext 03
	<<This.LblAsteriscos.Name>> <<This.LblAsteriscos.Caption>> <<This.LblAsteriscos.Width>> 	
	<<This.LblTitulo.Name>> <<This.LblTitulo.Caption>> <<This.LblTitulo.Width>>
	<<This.LblObservaciones.Name>> <<This.LblObservaciones.Caption>> <<This.LblObservaciones.Width>>
	<<This.Name>> Width <<This.Width>>
	EndText
	
	*Inform( lcMsg, Program() )
	
	This.lblFecha.Left 			= This.Width - This.lblFecha.Width - 05

	This.lblFecha.Top = 02
*!*		This.lblFecha.Left = This.Width - This.lblFecha.Width - 05

	This.lblFecha.Anchor = ANCHOR_Top_Absolute +;
		ANCHOR_Right_Absolute


*!*		This.lblTitulo.Left = 05
	This.lblTitulo.Top = 02
	This.lblTitulo.Anchor = ANCHOR_Top_Absolute +;
		ANCHOR_Left_Absolute

*!*		This.LblObservaciones.Left = 05
	This.LblObservaciones.Top = 02
	This.LblObservaciones.Anchor = ANCHOR_Top_Absolute +;
		ANCHOR_Left_Absolute

	*!*	#DEFINE ANCHOR_Top_Left 				000
	*!*	#DEFINE ANCHOR_Top_Absolute 			001
	*!*	#DEFINE ANCHOR_Left_Absolute 			002
	*!*	#DEFINE ANCHOR_Bottom_Absolute 			004
	*!*	#DEFINE ANCHOR_Right_Absolute 			008
	*!*	#DEFINE ANCHOR_Top_Relative 			016
	*!*	#DEFINE ANCHOR_Left_Relative 			032
	*!*	#DEFINE ANCHOR_Bottom_Relative 			064
	*!*	#DEFINE ANCHOR_Right_Relative 			128
	*!*	#DEFINE ANCHOR_Horizontal_Fixed_Size 	256
	*!*	#DEFINE ANCHOR_Vertical_Fixed_Size 		512
	
*!*		This.lblAsteriscos.Caption 		= ""
*!*		This.lblFecha.Caption 			= ""
*!*		This.lblObservaciones.Caption 	= ""
*!*		This.LblTitulo.Caption 			= ""
	
	

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	*Throw loError

Finally


Endtry

ENDPROC
PROCEDURE enabled_assign
lparameters tEnabled
This.Enabled = tEnabled

This.SetAll( "Enabled", tEnabled )

ENDPROC
PROCEDURE sincronizarcontroles
#INCLUDE "FW\Comunes\Include\Praxis.h"

Local lcCommand As String

Try

	lcCommand = ""
	
	This.lblAsteriscos.Caption 		= ""
	This.lblFecha.Caption 			= ""
	This.lblObservaciones.Caption 	= ""
	This.LblTitulo.Caption 			= ""
	
	
	
	This.lblFecha.Caption = F_Today( FECHAHOY )
	This.lblTitulo.Caption = Thisform.cTituloDelPrograma
	If Thisform.oRegistro.ABM = ABM_BAJA
		This.lblTitulo.ForeColor = RGB(255,0,0)
		This.lblTitulo.FontSize = 14
		*This.lblTitulo.Autosize = .T.
	EndIf

	If Asterisco And Vartype( WCLAV ) = "C"
		This.lblAsteriscos.Caption = ""

		Do Case
			Case WCLAV = "B"
				This.lblAsteriscos.Caption = "*"

			Case WCLAV = "M"
				This.lblAsteriscos.Caption = "**"

		Endcase

	Endif

*!*		This.lblAsteriscos.Left 	= 0
*!*		This.lblTitulo.Left 		= This.lblAsteriscos.Width
*!*		This.lblObservaciones.Left 	= This.lblTitulo.Left + This.lblTitulo.Width + 10
*!*		This.lblFecha.Left 			= Thisform.Width - This.lblFecha.Width - 05

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


Endtry

ENDPROC
[END METHODS]
[START RESERVED1]
Class[END RESERVED1]
[START RESERVED2]
5[END RESERVED2]
[START RESERVED3]
_memberdata XML Metadata for customizable properties
*sincronizarcontroles 
*autosize Specifies if a control is automatically resized to fit its contents.
*enabled_assign 
[END RESERVED3]
[START RESERVED6]
Pixels[END RESERVED6]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0SRVY6
[CLASS] label
[BASECLASS] label
[OBJNAME] lblFecha
[PARENT] crud_titulo
[START PROPERTIES]
FontBold = .T.
FontSize = 12
Anchor = 8
Alignment = 1
BackStyle = 0
Caption = "Fecha"
Height = 22
Left = 540
Top = 7
Width = 144
ForeColor = 0,0,255
Name = "lblFecha"
[END PROPERTIES]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0SRVY7
[CLASS] label
[BASECLASS] label
[OBJNAME] lblTitulo
[PARENT] crud_titulo
[START PROPERTIES]
FontBold = .T.
FontSize = 12
Alignment = 0
BackStyle = 0
Caption = "Título del programa"
Height = 22
Left = 12
Top = 7
Width = 204
ForeColor = 0,0,255
Name = "lblTitulo"
[END PROPERTIES]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0SRVY8
[CLASS] label
[BASECLASS] label
[OBJNAME] lblObservaciones
[PARENT] crud_titulo
[START PROPERTIES]
FontBold = .T.
FontSize = 12
Alignment = 0
BackStyle = 0
Caption = "Observaciones"
Height = 22
Left = 336
Top = 7
Width = 198
ForeColor = 0,0,255
Name = "lblObservaciones"
[END PROPERTIES]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _65D0SRVY9
[CLASS] label
[BASECLASS] label
[OBJNAME] lblAsteriscos
[PARENT] crud_titulo
[START PROPERTIES]
FontBold = .T.
FontSize = 12
Alignment = 1
BackStyle = 0
Caption = "**"
Height = 22
Left = 0
Top = 7
Width = 12
ForeColor = 0,0,255
Name = "lblAsteriscos"
[END PROPERTIES]

[ RECORD]
[PLATFORM] COMMENT 
[UNIQUEID] RESERVED  
[OBJNAME] crud_titulo
[START RESERVED1]
 ! ..\..\fw\comunes\include\praxis.hlnfdV! ..\..\fw\comunes\include\foxpro.hmÊrûF" ..\..\fw\comunes\include\strings.h¦nZOJ' ..\..\tools\namespaces\include\system.h®o±ÙF[END RESERVED1]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _66C0N58YC
[CLASS] container
[BASECLASS] container
[OBJNAME] crud_ajustes
[START PROPERTIES]
Width = 240
Height = 84
BackStyle = 0
_memberdata = <VFPData><memberdata name="mostrar" display="Mostrar"/><memberdata name="ctable" display="cTable"/><memberdata name="ctable_access" display="cTable_Access"/><memberdata name="initialize" display="Initialize"/></VFPData>
ctable = 
Name = "crud_ajustes"
[END PROPERTIES]
[START METHODS]
PROCEDURE Init
Local lcCommand As String

Try

	lcCommand = ""
	
	If Pemstatus( Thisform, 'InitializeControls', 5 )
		Bindevent( Thisform, 'InitializeControls', This, 'Initialize', 1 )
	Endif
	
	This.Width 	= 240
	This.Height = 84
	This.Crud_Shape.BackStyle = 1
	This.Crud_Shape.BackColor = RGB(245,245,255)
	
	
	This.BorderWidth 			= 0
	This.SetAll( "Visible", .F. )
	
	*This.lblMostrar.Left 		= This.Width - This.lblMostrar.Width
	This.Crud_Shape.Top 		= 0
	This.Crud_Shape.Left 		= 0
	This.Crud_Shape.Width 		= This.Width
	This.Crud_Shape.Height 		= This.Height
	
	
*!*		This.spnOrden.cTable 		= This.cTable
*!*		This.chkActivo.cTable 		= This.cTable
*!*		This.chkEs_Sistema.cTable 	= This.cTable
	
Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


Endtry

ENDPROC
PROCEDURE ctable_access
Local lcCommand As String
Local loModelo As oModelo Of "FrontEnd\Prg\Modelo.prg"

Try

	lcCommand = ""

	If Empty( This.cTable )
		loModelo = Thisform.oBiz
		This.cTable = loModelo.cTabla
	EndIf


*!*		If Empty( This.cTable )
*!*			If Empty(Thisform.cModelo)
*!*				Text To lcMsg NoShow TextMerge Pretext 03
*!*				Falta definir la propiedad "cModelo"
*!*				en el Form "<<Thisform.Name>>"			
*!*				EndText
*!*				
*!*				Stop( lcMsg, "Alerta al Desarrollador" )

*!*			EndIf

*!*			loModelo = GetEntity( Thisform.cModelo )
*!*			This.cTable = loModelo.cTabla
*!*		EndIf
	

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally
	loModelo = Null


Endtry

Return This.cTable

ENDPROC
PROCEDURE initialize
Local lcCommand as String

Try

	lcCommand = ""
	
	This.spnOrden.cTable 		= This.cTable
	This.chkActivo.cTable 		= This.cTable
	This.chkEs_Sistema.cTable 	= This.cTable
	

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = NewObject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


EndTry

ENDPROC
PROCEDURE mostrar
Local lcCommand As String
Local loUser As User Of "Fw\TierAdapter\Comun\prxUser.prg"

Try

	lcCommand = ""
	loUser = NewUser()
	
	If This.Crud_Shape.BackStyle = 0
		This.spnOrden.Visible 		= loUser.lModificaOrden
		This.lblOrden.Visible  		= loUser.lModificaOrden
		This.chkActivo.Visible 		= loUser.lModificaActivo
		This.chkEs_Sistema.Visible 	= loUser.lModificaEsSistema
		This.Crud_Shape.Visible 	= .T.

		* This.SetAll( "Visible", .T. )


		This.BackStyle 				= 0
		This.Crud_Shape.BackStyle 	= 1
		This.lblMostrar.Caption 	= "Ocultar"

	Else
		*!*			This.spnOrden.Visible 		= .F.
		*!*			This.chkActivo.Visible 		= .F.
		*!*			This.chkEs_Sistema.Visible 	= .F.
		*!*			This.Crud_Shape.Visible 	= .F.

		This.SetAll( "Visible", .F. )

		This.BackStyle 				= 0
		This.Crud_Shape.BackStyle 	= 0
		This.lblMostrar.Caption 	= "Mostrar más datos"
		This.lblMostrar.Visible 	= .T.

	Endif

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


Endtry

ENDPROC
[END METHODS]
[START RESERVED1]
Class[END RESERVED1]
[START RESERVED2]
7[END RESERVED2]
[START RESERVED3]
_memberdata XML Metadata for customizable properties
ctable Nombre de la tabla o modelo asociado al control
*mostrar Muestra los controles
*ctable_access 
*initialize 
[END RESERVED3]
[START RESERVED6]
Pixels[END RESERVED6]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _66F0T9XJ8
[CLASS] shape
[BASECLASS] shape
[OBJNAME] Crud_Shape
[PARENT] crud_ajustes
[START PROPERTIES]
Top = 0
Left = 0
Height = 84
Width = 240
Curvature = 25
BackColor = 245,245,255
BorderColor = 0,128,255
ZOrderSet = 0
Name = "Crud_Shape"
[END PROPERTIES]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _66C0NF75R
[CLASS] _spinner
[CLASSLOC] ..\..\fw\comunes\vcx\_controles_base.vcx
[BASECLASS] spinner
[OBJNAME] spnOrden
[PARENT] crud_ajustes
[START PROPERTIES]
Left = 72
Top = 29
Width = 60
lautomaticdisplay = .F.
Name = "spnOrden"
[END PROPERTIES]
[START METHODS]
PROCEDURE initialize
Local lcCommand As String
Local loBiz As ControlesBase Of "FW\Comunes\vcx\_Controles_Base.prg"

Try

	lcCommand = ""

	This.cTable = This.Parent.cTable
	This.cFieldName = Substr( This.Name, 4 )
	This.ControlSource = "Thisform.oRegistro." + This.cFieldName

Catch To oErr
	Local loError As ErrorHandler Of "Tools\ErrorHandler\Prg\ErrorHandler.prg"
	loError = Newobject( "ErrorHandler", "ErrorhandlerPrg\ErrorHandler.prg" )
	loError.Cremark = lcCommand
	loError.Process( oErr )
	Throw loError

Finally
	loBiz = Null

Endtry

ENDPROC
[END METHODS]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _66C0NF75V
[CLASS] _checkbox
[CLASSLOC] ..\..\fw\comunes\vcx\_controles_base.vcx
[BASECLASS] checkbox
[OBJNAME] chkActivo
[PARENT] crud_ajustes
[START PROPERTIES]
Top = 36
Left = 12
AutoSize = .T.
Alignment = 0
Caption = "Activo"
lautomaticdisplay = .F.
Name = "chkActivo"
[END PROPERTIES]
[START METHODS]
PROCEDURE initialize
Local lcCommand As String
Local loBiz As ControlesBase Of "FW\Comunes\vcx\_Controles_Base.prg"

Try

	lcCommand = ""

	This.cTable = This.Parent.cTable
	This.cFieldName = Substr( This.Name, 4 )
	This.ControlSource = "Thisform.oRegistro." + This.cFieldName

Catch To oErr
	Local loError As ErrorHandler Of "Tools\ErrorHandler\Prg\ErrorHandler.prg"
	loError = Newobject( "ErrorHandler", "ErrorhandlerPrg\ErrorHandler.prg" )
	loError.Cremark = lcCommand
	loError.Process( oErr )
	Throw loError

Finally
	loBiz = Null

Endtry

ENDPROC
[END METHODS]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _66C0NF75Z
[CLASS] _checkbox
[CLASSLOC] ..\..\fw\comunes\vcx\_controles_base.vcx
[BASECLASS] checkbox
[OBJNAME] chkEs_Sistema
[PARENT] crud_ajustes
[START PROPERTIES]
Top = 41
Left = 144
AutoSize = .T.
Alignment = 0
Caption = "Es Sistema"
lautomaticdisplay = .F.
Name = "chkEs_Sistema"
[END PROPERTIES]
[START METHODS]
PROCEDURE initialize
Local lcCommand As String
Local loBiz As ControlesBase Of "FW\Comunes\vcx\_Controles_Base.prg"

Try

	lcCommand = ""

	This.cTable = This.Parent.cTable
	This.cFieldName = Substr( This.Name, 4 )
	This.ControlSource = "Thisform.oRegistro." + This.cFieldName

Catch To oErr
	Local loError As ErrorHandler Of "Tools\ErrorHandler\Prg\ErrorHandler.prg"
	loError = Newobject( "ErrorHandler", "ErrorhandlerPrg\ErrorHandler.prg" )
	loError.Cremark = lcCommand
	loError.Process( oErr )
	Throw loError

Finally
	loBiz = Null

Endtry

ENDPROC
[END METHODS]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _66C0NF761
[CLASS] _label
[CLASSLOC] ..\..\fw\comunes\vcx\_controles_base.vcx
[BASECLASS] label
[OBJNAME] lblMostrar
[PARENT] crud_ajustes
[START PROPERTIES]
Alignment = 1
Caption = "Mostrar más datos"
Left = 106
Top = 60
Width = 120
ForeColor = 0,128,192
lhyperlink = .T.
Name = "lblMostrar"
[END PROPERTIES]
[START METHODS]
PROCEDURE onclick
This.Parent.Mostrar()

ENDPROC
[END METHODS]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _66K10RJGQ
[CLASS] label
[BASECLASS] label
[OBJNAME] lblOrden
[PARENT] crud_ajustes
[START PROPERTIES]
AutoSize = .T.
BackStyle = 0
Caption = "Orden"
Height = 17
Left = 72
Top = 12
Width = 36
Name = "lblOrden"
[END PROPERTIES]

[ RECORD]
[PLATFORM] COMMENT 
[UNIQUEID] RESERVED  
[OBJNAME] crud_ajustes
[START PROPERTIES]
Arial, 0, 9, 5, 15, 12, 32, 3, 0
[END PROPERTIES]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _6D30T5IKA
[CLASS] crud_form
[CLASSLOC] crud.vcx
[BASECLASS] form
[OBJNAME] crud_form_con_solapas
[START PROPERTIES]
Top = 0
Left = 0
DoCreate = .T.
Name = "crud_form_con_solapas"
Crud_Shape.Top = 48
Crud_Shape.Left = 12
Crud_Shape.Name = "Crud_Shape"
crud_buttons.cmdGrabar.Name = "cmdGrabar"
crud_buttons.cmdEliminar.Name = "cmdEliminar"
crud_buttons.cmdCancelar.Name = "cmdCancelar"
crud_buttons.Name = "crud_buttons"
crud_titulo.lblFecha.Name = "lblFecha"
crud_titulo.lblTitulo.Name = "lblTitulo"
crud_titulo.lblObservaciones.Name = "lblObservaciones"
crud_titulo.lblAsteriscos.Name = "lblAsteriscos"
crud_titulo.Name = "crud_titulo"
crud_ajustes.Crud_Shape.Name = "Crud_Shape"
crud_ajustes.spnOrden.Name = "spnOrden"
crud_ajustes.chkActivo.Alignment = 0
crud_ajustes.chkActivo.Name = "chkActivo"
crud_ajustes.chkEs_Sistema.Alignment = 0
crud_ajustes.chkEs_Sistema.Name = "chkEs_Sistema"
crud_ajustes.lblMostrar.Name = "lblMostrar"
crud_ajustes.lblOrden.Name = "lblOrden"
crud_ajustes.Name = "crud_ajustes"
[END PROPERTIES]
[START METHODS]
PROCEDURE Load
#INCLUDE "FW\Comunes\Include\Praxis.h"

DoDefault()
ThisForm.Crud_Shape.Visible = .F.
ThisForm.Crud_PageFrame.Width = Thisform.Width
ENDPROC
PROCEDURE autosize
Local lcCommand As String
Local lnFormHeight As Integer,;
lnPageFormHeight as Integer
Local llAutocenter as Boolean

Try

	lcCommand = ""
	
	llAutocenter = .F.
	
	Thisform.Crud_Titulo.Anchor 	= 0
	Thisform.Crud_Buttons.Anchor 	= 0
	Thisform.Crud_Ajustes.Anchor 	= 0
	ThisForm.Crud_PageFrame.Anchor 	= 0
	
	Thisform.Crud_PageFrame.Autosize()
	lnPageFormHeight = ThisForm.Crud_PageFrame.nCalculatedHeight + ( Thisform.nGap * 4 )
	If lnPageFormHeight > ThisForm.Crud_PageFrame.Height
		ThisForm.Crud_PageFrame.Height = lnPageFormHeight
	EndIf
	
	If Thisform.Crud_PageFrame.Width > Thisform.Width
		Thisform.Width = Thisform.Crud_PageFrame.Width

	Else
		Thisform.Crud_PageFrame.Width = Thisform.Width

	EndIf
	
	Thisform.nCalculatedHeight = Max( ThisForm.Crud_PageFrame.Height, Thisform.nCalculatedHeight )

	lnFormHeight = ( Thisform.nCalculatedHeight + Thisform.Crud_Buttons.Height )
	lnFormHeight = lnFormHeight + ( Thisform.nGap * 3 )

	If lnFormHeight > Thisform.Height
		Thisform.Height = lnFormHeight
	EndIf
	
	lnFormHeight = ThisForm.Crud_titulo.Height + ThisForm.Crud_PageFrame.Height + Thisform.Crud_Buttons.Height
	lnFormHeight = lnFormHeight + ( Thisform.nGap * 2 )
	If lnFormHeight > Thisform.Height
		Thisform.Height = lnFormHeight
	EndIf
	
	If Thisform.Height > _Screen.Height - ( Thisform.nGap * 4 )
		_Screen.Height = Thisform.Height + ( Thisform.nGap * 4 )
		llAutocenter = .T.
	EndIf
	
	If Thisform.Width > _Screen.Width - ( Thisform.nGap * 4 )
		_Screen.Width = Thisform.Width + ( Thisform.nGap * 4 )
		llAutocenter = .T.
	EndIf
	
	If llAutocenter
		_Screen.AutoCenter = .T.
	EndIf

	Thisform.AutoCenter = .T.

	If Mod( Thisform.Width, Thisform.nGap ) > 0
		Thisform.Width = Round( Thisform.Width / Thisform.nGap, 0 ) * Thisform.nGap
	Endif

	If Mod( Thisform.Height, Thisform.nGap ) > 0
		Thisform.Height = Round( Thisform.Height / Thisform.nGap, 0 ) * Thisform.nGap
	EndIf
	
	Thisform.Height = Thisform.Height + Int( Thisform.nGap / 2 )
	
	Thisform.Crud_Titulo.Top 	= 0
	Thisform.Crud_Titulo.Left 	= 0
	Thisform.Crud_Titulo.AutoSize()
	
	If Thisform.Crud_Titulo.Width > Thisform.Width
		Thisform.Width = Thisform.Crud_Titulo.Width
		
	Else
		Thisform.Crud_Titulo.Width 	= Thisform.Width

	EndIf
	
	Thisform.Crud_PageFrame.Top 		= Thisform.Crud_Titulo.Top + Thisform.Crud_Titulo.Height && + Thisform.nGap
	Thisform.Crud_PageFrame.Left 		= 0 && Thisform.nGap

	Thisform.Crud_Buttons.Top 	= Thisform.Height - Thisform.Crud_Buttons.Height - Thisform.nGap
	Thisform.Crud_Buttons.Left 	= 0
	Thisform.Crud_Buttons.Width = Thisform.Width
	Thisform.Crud_Buttons.AutoSize()

	Thisform.Crud_Ajustes.Top	= Thisform.Height - Thisform.Crud_Ajustes.Height - ( Thisform.nGap * 1 )
	Thisform.Crud_Ajustes.Left 	= Thisform.Width - Thisform.Crud_Ajustes.Width - ( Thisform.nGap * 2 ) - ThisForm.Crud_buttons.cmdGrabar.Width
	
	Thisform.Crud_Ajustes.Crud_Shape.BackStyle = 1
	Thisform.Crud_Ajustes.Mostrar()

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = Newobject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally
	Thisform.Crud_Titulo.Anchor 	= 11
*!*		Thisform.Crud_Shape.Anchor 		= 15
	Thisform.Crud_Buttons.Anchor 	= 14
	Thisform.Crud_Ajustes.Anchor 	= 12
	ThisForm.Crud_PageFrame.Anchor 	= 15


Endtry

ENDPROC
[END METHODS]
[START RESERVED1]
Class[END RESERVED1]
[START RESERVED2]
2[END RESERVED2]
[START RESERVED6]
Pixels[END RESERVED6]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _6D30V40L5
[CLASS] crud_pageframe
[CLASSLOC] crud.vcx
[BASECLASS] pageframe
[OBJNAME] Crud_PageFrame
[PARENT] crud_form_con_solapas
[START PROPERTIES]
ErasePage = .T.
PageCount = 1
Top = 36
Left = 0
Height = 264
Name = "Crud_PageFrame"
Principal.Crud_Shape.Name = "Crud_Shape"
Principal.Name = "Principal"
[END PROPERTIES]

[ RECORD]
[PLATFORM] COMMENT 
[UNIQUEID] RESERVED  
[OBJNAME] crud_form_con_solapas
[START PROPERTIES]
Arial, 0, 9, 5, 15, 12, 32, 3, 0
Arial, 1, 12, 8, 20, 15, 42, 4, 1
[END PROPERTIES]
[START RESERVED1]
 ! ..\..\fw\comunes\include\praxis.hlnfdV! ..\..\fw\comunes\include\foxpro.hmÊrûF" ..\..\fw\comunes\include\strings.h¦nZOJ' ..\..\tools\namespaces\include\system.h®o±ÙF[END RESERVED1]

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _6D30UUHEB
[CLASS] _page
[CLASSLOC] ..\..\fw\comunes\vcx\_controles_base.vcx
[BASECLASS] page
[OBJNAME] crud_solapa
[START PROPERTIES]
ngap = 12
cfontname = 
nfontsize = 0
nforecolor = 0
_memberdata =      318<VFPData><memberdata name="autosize" display="Autosize"/><memberdata name="nleft" type="Property" favorites="True"/><memberdata name="ngap" display="nGap"/><memberdata name="cfontname" display="cFontName"/><memberdata name="nfontsize" display="nFontSize"/><memberdata name="nforecolor" display="nForeColor"/></VFPData>
Height = 215
Width = 691
nleft = 24
Name = "crud_solapa"
Crud_Shape.Height = 216
Crud_Shape.Name = "Crud_Shape"
[END PROPERTIES]
[START METHODS]
PROCEDURE Activate
*This.FontBold 	= .T.
This.FontName 	= "Verdana"
This.FontSize 	= 14
This.ForeColor 	= RGB(0,64,128)



ENDPROC
PROCEDURE Deactivate
*This.FontBold 	= .F.
This.FontName 	= This.cFontName
This.FontSize 	= This.nFontSize
This.ForeColor 	= This.nForeColor

ENDPROC
PROCEDURE Init
DoDefault()
This.cFontName 	= This.FontName
This.nFontSize 	= This.FontSize
This.nForeColor	= This.ForeColor
ENDPROC
PROCEDURE autosize
Local lcCommand as String

Try

	lcCommand = ""
	
	* Agregarle las solapas
	This.nCalculatedHeight = This.nCalculatedHeight + ( This.nGap * 2 )

	This.Crud_Shape.Anchor = 0
*!*		This.Crud_Shape.Top = This.nGap 	
*!*		This.Crud_Shape.Left = This.nGap
*!*		This.Crud_Shape.Height = This.Parent.Height - ( This.nGap * 2 )
	This.Crud_Shape.Width = This.Parent.Width - ( This.nGap * 2 )
	This.Crud_Shape.Anchor = 15

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = NewObject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally


EndTry

ENDPROC
[END METHODS]
[START RESERVED1]
Class[END RESERVED1]
[START RESERVED2]
1[END RESERVED2]
[START RESERVED3]
ngap
cfontname
nfontsize
nforecolor
*autosize Specifies if a control is automatically resized to fit its contents.
[END RESERVED3]
[START RESERVED6]
Pixels[END RESERVED6]

[ RECORD]
[PLATFORM] COMMENT 
[UNIQUEID] RESERVED  
[OBJNAME] crud_solapa

[ RECORD]
[PLATFORM] WINDOWS 
[UNIQUEID] _6D30UWWIM
[CLASS] _pageframe
[CLASSLOC] ..\..\fw\comunes\vcx\_controles_base.vcx
[BASECLASS] pageframe
[OBJNAME] crud_pageframe
[START PROPERTIES]
ErasePage = .T.
MemberClassLibrary = crud.vcx
MemberClass = "crud_solapa"
PageCount = 1
Width = 724
Height = 276
_memberdata = <VFPData><memberdata name="autosize" display="Autosize"/></VFPData>
Name = "crud_pageframe"
Crud_solapa1.Crud_Shape.Name = "Crud_Shape"
Crud_solapa1.Caption = "Principal"
Crud_solapa1.Name = "Principal"
[END PROPERTIES]
[START METHODS]
PROCEDURE autosize
Local lcCommand as String
Local lnCalculatedHeight as Integer

Local loPage as Crud_Solapa of "Frontend\vcx\Crud.vcx"

Try

	lcCommand 			= ""
	lnCalculatedHeight 	= 0
	
	For Each loPage in This.Pages
		loPage.Autosize()
		lnCalculatedHeight = Max( lnCalculatedHeight, loPage.nCalculatedHeight )
	EndFor
	
	This.nCalculatedHeight = lnCalculatedHeight

Catch To loErr
	Local loError As ErrorHandler Of 'Tools\ErrorHandler\Prg\ErrorHandler.prg'
	loError = NewObject( 'ErrorHandler', 'Tools\ErrorHandler\Prg\ErrorHandler.prg' )
	loError.cRemark = lcCommand
	loError.Process ( m.loErr )
	Throw loError

Finally
	loPage = Null

EndTry

ENDPROC
[END METHODS]
[START RESERVED1]
Class[END RESERVED1]
[START RESERVED2]
1[END RESERVED2]
[START RESERVED3]
*autosize Specifies if a control is automatically resized to fit its contents.
[END RESERVED3]
[START RESERVED6]
Pixels[END RESERVED6]

[ RECORD]
[PLATFORM] COMMENT 
[UNIQUEID] RESERVED  
[OBJNAME] crud_pageframe
[EOF]
